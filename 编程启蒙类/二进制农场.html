<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äºŒè¿›åˆ¶å†œåœº</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            padding: 15px;
            user-select: none;
        }

        h1 {
            color: #fff;
            font-size: 2rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .info-bar {
            display: flex;
            gap: 20px;
            margin-bottom: 10px;
        }

        .info-item {
            background: rgba(255,255,255,0.25);
            padding: 8px 18px;
            border-radius: 20px;
            color: #fff;
            font-size: 1.1rem;
        }

        .game-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            max-width: 450px;
        }

        .display-panel {
            background: #fff;
            border-radius: 15px;
            padding: 20px;
            width: 100%;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .number-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .bit {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .bit-label {
            font-size: 0.85rem;
            color: #666;
            font-weight: bold;
        }

        .bit-box {
            width: 50px;
            height: 60px;
            background: #f0f0f0;
            border: 3px solid #ddd;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }

        .bit-box:hover {
            border-color: #38ef7d;
        }

        .bit-box.one {
            background: #d4edda;
            border-color: #28a745;
            color: #28a745;
        }

        .bit-box.zero {
            background: #f8f9fa;
            border-color: #ddd;
            color: #999;
        }

        .equals {
            font-size: 2rem;
            color: #666;
        }

        .result-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #11998e;
        }

        .target {
            text-align: center;
            padding: 15px;
            background: #fff3cd;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .target-label {
            font-size: 0.9rem;
            color: #856404;
            margin-bottom: 5px;
        }

        .target-number {
            font-size: 2rem;
            font-weight: bold;
            color: #856404;
        }

        .buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            justify-content: center;
        }

        button.action-btn {
            padding: 12px 24px;
            font-size: 1rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }

        button.action-btn:hover { transform: translateY(-2px); }
        .btn-check { background: #11998e; color: #fff; }
        .btn-reset { background: #f39c12; color: #fff; }
        .btn-next { background: #3498db; color: #fff; }

        .result {
            display: none;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            width: 100%;
        }

        .result.show { display: block; }
        .result.success { background: #d4edda; color: #155724; }
        .result.fail { background: #f8d7da; color: #721c24; }

        .explanation {
            font-size: 0.85rem;
            color: #666;
            text-align: center;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
        }

        .hint {
            color: rgba(255,255,255,0.9);
            font-size: 0.85rem;
            text-align: center;
            background: rgba(255,255,255,0.15);
            padding: 10px;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>ğŸŒ¾ äºŒè¿›åˆ¶å†œåœº</h1>

    <div class="info-bar">
        <div class="info-item">å…³å¡: <span id="level">1</span></div>
        <div class="info-item">å¾—åˆ†: <span id="score">0</span></div>
    </div>

    <div class="game-area">
        <div class="display-panel">
            <div class="target">
                <div class="target-label">è¯·æŠŠæ•°å­—è½¬æ¢æˆäºŒè¿›åˆ¶</div>
                <div class="target-number" id="targetNumber">5</div>
            </div>

            <div class="number-display" id="bitDisplay">
                <!-- äºŒè¿›åˆ¶ä½ç”±JSç”Ÿæˆ -->
            </div>

            <div style="text-align:center;">
                <span class="equals">=</span>
                <div class="result-number" id="currentValue">0</div>
            </div>

            <div class="explanation" id="explanation">
                ç‚¹å‡»æ–¹æ¡†åˆ‡æ¢0å’Œ1<br>
                1=æœ‰ğŸƒï¼Œ0=æ²¡æœ‰ğŸƒ
            </div>
        </div>

        <div class="buttons">
            <button class="action-btn btn-reset" onclick="resetBits()">ğŸ”„ é‡ç½®</button>
            <button class="action-btn btn-check" onclick="checkAnswer()">âœ… æ£€æŸ¥</button>
        </div>

        <div class="result" id="result">
            <h3 id="resultTitle"></h3>
            <p id="resultMessage"></p>
        </div>

        <div class="buttons" id="nextButtons" style="display:none;">
            <button class="action-btn btn-next" onclick="nextLevel()">ä¸‹ä¸€å…³ â†’</button>
        </div>

        <p class="hint">
            è®¡ç®—æœºåªç”¨0å’Œ1æ¥è¡¨ç¤ºæ•°å­—<br>
            ç‚¹å‡»åˆ‡æ¢å¼€å…³ï¼Œç†è§£äºŒè¿›åˆ¶ï¼
        </p>
    </div>

    <script>
        let currentLevel = 0;
        let score = 0;
        let bits = [0, 0, 0, 0];
        let target = 5;

        const levels = [
            { target: 5, bits: 3 },
            { target: 3, bits: 3 },
            { target: 7, bits: 3 },
            { target: 10, bits: 4 },
            { target: 15, bits: 4 },
            { target: 8, bits: 4 },
            { target: 20, bits: 5 },
            { target: 31, bits: 5 }
        ];

        function initGame() {
            loadLevel(currentLevel);
        }

        function loadLevel(levelIndex) {
            const level = levels[levelIndex];
            target = level.target;
            bits = new Array(level.bits).fill(0);

            document.getElementById('level').textContent = levelIndex + 1;
            document.getElementById('targetNumber').textContent = target;

            // é‡ç½®ç»“æœæ˜¾ç¤º
            document.getElementById('result').classList.remove('show', 'success', 'fail');
            document.getElementById('nextButtons').style.display = 'none';

            renderBits();
            updateValue();
        }

        function renderBits() {
            const container = document.getElementById('bitDisplay');
            container.innerHTML = '';

            const bitValues = [8, 4, 2, 1, 0];

            for (let i = 0; i < bits.length; i++) {
                const bit = document.createElement('div');
                bit.className = 'bit';

                const label = document.createElement('div');
                label.className = 'bit-label';
                label.textContent = Math.pow(2, bits.length - 1 - i);

                const box = document.createElement('div');
                box.className = 'bit-box ' + (bits[i] ? 'one' : 'zero');
                box.textContent = bits[i];
                box.onclick = () => toggleBit(i);

                bit.appendChild(label);
                bit.appendChild(box);
                container.appendChild(bit);
            }
        }

        function toggleBit(index) {
            bits[index] = bits[index] ? 0 : 1;

            // æ›´æ–°æ˜¾ç¤º
            const boxes = document.querySelectorAll('.bit-box');
            boxes[index].className = 'bit-box ' + (bits[index] ? 'one' : 'zero');
            boxes[index].textContent = bits[index];

            updateValue();
        }

        function updateValue() {
            let value = 0;
            for (let i = 0; i < bits.length; i++) {
                value += bits[i] * Math.pow(2, bits.length - 1 - i);
            }
            document.getElementById('currentValue').textContent = value;
        }

        function resetBits() {
            bits = bits.map(() => 0);
            renderBits();
            updateValue();
        }

        function checkAnswer() {
            let value = 0;
            for (let i = 0; i < bits.length; i++) {
                value += bits[i] * Math.pow(2, bits.length - 1 - i);
            }

            const result = document.getElementById('result');

            if (value === target) {
                score += (levels.length - currentLevel) * 15;
                document.getElementById('score').textContent = score;

                result.classList.remove('fail');
                result.classList.add('show', 'success');
                document.getElementById('resultTitle').textContent = 'ğŸ‰ ç­”å¯¹äº†ï¼';
                document.getElementById('resultMessage').textContent = `${target} = ${bits.join('')} (äºŒè¿›åˆ¶)`;

                document.getElementById('nextButtons').style.display = 'flex';
            } else {
                result.classList.remove('success');
                result.classList.add('show', 'fail');
                document.getElementById('resultTitle').textContent = 'âŒ ä¸å¯¹å“¦';
                document.getElementById('resultMessage').textContent = `å½“å‰æ˜¯ ${value}ï¼Œå†è¯•è¯•ï¼`;
            }
        }

        function nextLevel() {
            if (currentLevel < levels.length - 1) {
                currentLevel++;
            } else {
                currentLevel = 0;
                alert('ğŸŠ æ­å–œé€šå…³ï¼æ€»åˆ†: ' + score);
            }
            loadLevel(currentLevel);
        }

        initGame();
    </script>
</body>
</html>
