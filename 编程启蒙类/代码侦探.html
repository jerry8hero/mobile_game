<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»£ç ä¾¦æ¢</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #434343 0%, #000000 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            padding: 15px;
            user-select: none;
        }

        h1 {
            color: #fff;
            font-size: 2rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .info-bar {
            display: flex;
            gap: 20px;
            margin-bottom: 10px;
        }

        .info-item {
            background: rgba(255,255,255,0.25);
            padding: 8px 18px;
            border-radius: 20px;
            color: #fff;
            font-size: 1.1rem;
        }

        .game-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            max-width: 450px;
            width: 100%;
        }

        .code-panel {
            background: #1e1e1e;
            border-radius: 15px;
            padding: 20px;
            width: 100%;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }

        .code-title {
            color: #aaa;
            font-size: 0.9rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        .dot.red { background: #ff5f56; }
        .dot.yellow { background: #ffbd2e; }
        .dot.green { background: #27c93f; }

        .code-content {
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 1rem;
            line-height: 1.8;
            color: #d4d4d4;
            background: #2d2d2d;
            padding: 15px;
            border-radius: 10px;
            overflow-x: auto;
        }

        .line {
            display: block;
            padding: 2px 5px;
            border-radius: 3px;
        }

        .line:hover {
            background: #3d3d3d;
        }

        .line.error {
            background: #5a1d1d;
            border-left: 3px solid #f44336;
        }

        .line-number {
            color: #858585;
            margin-right: 15px;
            user-select: none;
        }

        .keyword { color: #569cd6; }
        .string { color: #ce9178; }
        .number { color: #b5cea8; }
        .comment { color: #6a9955; }
        .function { color: #dcdcaa; }
        .variable { color: #9cdcfe; }

        .hint-text {
            color: #f1c40f;
            font-size: 0.9rem;
            margin-top: 10px;
            padding: 10px;
            background: rgba(241, 196, 15, 0.1);
            border-radius: 8px;
        }

        .options {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .option-btn {
            padding: 12px 20px;
            font-size: 1rem;
            border: 2px solid #444;
            border-radius: 10px;
            background: #2d2d2d;
            color: #fff;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Consolas', monospace;
        }

        .option-btn:hover {
            border-color: #3498db;
            transform: scale(1.02);
        }

        .option-btn.correct {
            background: #27ae60;
            border-color: #27ae60;
        }

        .option-btn.wrong {
            background: #e74c3c;
            border-color: #e74c3c;
        }

        .result {
            display: none;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            width: 100%;
        }

        .result.show { display: block; }
        .result.success { background: #27ae60; color: #fff; }
        .result.fail { background: #e74c3c; color: #fff; }

        .buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            justify-content: center;
        }

        button.action-btn {
            padding: 12px 24px;
            font-size: 1rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }

        button.action-btn:hover { transform: translateY(-2px); }
        .btn-next { background: #3498db; color: #fff; }
        .btn-retry { background: #f39c12; color: #fff; }

        .hint {
            color: rgba(255,255,255,0.8);
            font-size: 0.85rem;
            text-align: center;
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>ğŸ” ä»£ç ä¾¦æ¢</h1>

    <div class="info-bar">
        <div class="info-item">å…³å¡: <span id="level">1</span></div>
        <div class="info-item">å¾—åˆ†: <span id="score">0</span></div>
    </div>

    <div class="game-area">
        <div class="code-panel">
            <div class="code-title">
                <span class="dot red"></span>
                <span class="dot yellow"></span>
                <span class="dot green"></span>
                <span style="margin-left:10px;">bug_finder.py</span>
            </div>

            <div class="code-content" id="codeContent">
                <!-- ä»£ç ç”±JSç”Ÿæˆ -->
            </div>

            <div class="hint-text" id="hintText">
                æç¤ºï¼šæ‰¾æ‰¾å“ªé‡Œæœ‰é—®é¢˜ï¼Ÿ
            </div>
        </div>

        <div class="options" id="options">
            <!-- é€‰é¡¹ç”±JSç”Ÿæˆ -->
        </div>

        <div class="result" id="result">
            <h3 id="resultTitle"></h3>
            <p id="resultMessage"></p>
        </div>

        <div class="buttons">
            <button class="action-btn btn-retry" onclick="retry()">ğŸ”„ é‡è¯•</button>
            <button class="action-btn btn-next" id="nextBtn" onclick="nextLevel()">ä¸‹ä¸€å…³ â†’</button>
        </div>

        <p class="hint">
            ä»”ç»†çœ‹çœ‹ä»£ç å“ªé‡Œå†™é”™äº†ï¼Ÿ<br>
            å½“ä¸ªå°ä¾¦æ¢ï¼Œæ‰¾å‡ºä»£ç ä¸­çš„bugï¼
        </p>
    </div>

    <script>
        let currentLevel = 0;
        let score = 0;
        let answered = false;

        // å…³å¡æ•°æ®
        const levels = [
            {
                code: [
                    { text: 'def say_hello():', num: 1 },
                    { text: '    print("ä½ å¥½")', num: 2 },
                    { text: 'say_hello()', num: 3 },
                    { text: 'print("å®Œæˆ")', num: 4 }
                ],
                errorLine: 3,
                hint: "è¿™ä¸ªå‡½æ•°è¢«å®šä¹‰äº†ï¼Œä½†æœ‰æ²¡æœ‰è¢«è°ƒç”¨ï¼Ÿ",
                question: "å“ªä¸€è¡Œæœ‰é”™è¯¯ï¼Ÿ",
                options: [
                    { text: 'ç¬¬1è¡Œ', correct: false },
                    { text: 'ç¬¬2è¡Œ', correct: false },
                    { text: 'ç¬¬3è¡Œ', correct: false },
                    { text: 'æ²¡æœ‰é”™è¯¯', correct: true }
                ]
            },
            {
                code: [
                    { text: 'a = 10', num: 1 },
                    { text: 'b = 20', num: 2 },
                    { text: 'result = a + b', num: 3 },
                    { text: 'print(result)', num: 4 },
                    { text: 'print("å’Œæ˜¯: result")', num: 5 }
                ],
                errorLine: 5,
                hint: "å­—ç¬¦ä¸²é‡Œçš„resultä¼šåŸæ ·æ‰“å°",
                question: "å“ªä¸€è¡Œæœ‰é—®é¢˜ï¼Ÿ",
                options: [
                    { text: 'ç¬¬3è¡Œ', correct: false },
                    { text: 'ç¬¬4è¡Œ', correct: false },
                    { text: 'ç¬¬5è¡Œ', correct: true },
                    { text: 'æ²¡æœ‰é”™è¯¯', correct: false }
                ]
            },
            {
                code: [
                    { text: 'for i in range(5):', num: 1 },
                    { text: 'print(i)', num: 2 },
                    { text: 'print("å®Œæˆ")', num: 3 }
                ],
                errorLine: -1,
                hint: "è¿™æ®µä»£ç çœ‹èµ·æ¥æ˜¯æ­£ç¡®çš„",
                question: "æœ‰é”™è¯¯å—ï¼Ÿ",
                options: [
                    { text: 'ç¬¬1è¡Œ', correct: false },
                    { text: 'ç¬¬2è¡Œ', correct: false },
                    { text: 'æ²¡æœ‰é”™è¯¯', correct: true }
                ]
            },
            {
                code: [
                    { text: 'numbers = [1, 2, 3]', num: 1 },
                    { text: 'print(numbers[3])', num: 2 },
                    { text: 'print("ç»“æŸ")', num: 3 }
                ],
                errorLine: 2,
                hint: "åˆ—è¡¨ä»0å¼€å§‹ç´¢å¼•",
                question: "å“ªä¸€è¡Œæœ‰é”™è¯¯ï¼Ÿ",
                options: [
                    { text: 'ç¬¬1è¡Œ', correct: false },
                    { text: 'ç¬¬2è¡Œ', correct: true },
                    { text: 'ç¬¬3è¡Œ', correct: false }
                ]
            },
            {
                code: [
                    { text: 'if score >= 60', num: 1 },
                    { text: '    print("åŠæ ¼")', num: 2 },
                    { text: 'else:', num: 3 },
                    { text: '    print("ä¸åŠæ ¼")', num: 4 },
                    { text: 'print("æ¸¸æˆç»“æŸ")', num: 5 }
                ],
                errorLine: 1,
                hint: "ifè¯­å¥åé¢éœ€è¦åŠ ä»€ä¹ˆï¼Ÿ",
                question: "å“ªä¸€è¡Œæœ‰é”™è¯¯ï¼Ÿ",
                options: [
                    { text: 'ç¬¬1è¡Œ', correct: true },
                    { text: 'ç¬¬3è¡Œ', correct: false },
                    { text: 'ç¬¬5è¡Œ', correct: false }
                ]
            },
            {
                code: [
                    { text: 'def add(a, b):', num: 1 },
                    { text: '    return a + b', num: 2 },
                    { text: 'result = add(5)', num: 3 },
                    { text: 'print(result)', num: 4 }
                ],
                errorLine: 3,
                hint: "å‡½æ•°éœ€è¦å‡ ä¸ªå‚æ•°ï¼Ÿ",
                question: "å“ªä¸€è¡Œæœ‰é”™è¯¯ï¼Ÿ",
                options: [
                    { text: 'ç¬¬1è¡Œ', correct: false },
                    { text: 'ç¬¬2è¡Œ', correct: false },
                    { text: 'ç¬¬3è¡Œ', correct: true }
                ]
            },
            {
                code: [
                    { text: 'name = "å°æ˜"', num: 1 },
                    { text: 'age = 8', num: 2 },
                    { text: 'print(name + age)', num: 3 }
                ],
                errorLine: 3,
                hint: "ä¸åŒç±»å‹ä¸èƒ½ç›´æ¥æ‹¼æ¥",
                question: "å“ªä¸€è¡Œæœ‰é”™è¯¯ï¼Ÿ",
                options: [
                    { text: 'ç¬¬1è¡Œ', correct: false },
                    { text: 'ç¬¬2è¡Œ', correct: false },
                    { text: 'ç¬¬3è¡Œ', correct: true }
                ]
            }
        ];

        function initGame() {
            loadLevel(currentLevel);
        }

        function loadLevel(levelIndex) {
            const level = levels[levelIndex];

            document.getElementById('level').textContent = levelIndex + 1;
            document.getElementById('hintText').textContent = 'æç¤ºï¼š' + level.hint;

            // ç”Ÿæˆä»£ç æ˜¾ç¤º
            const codeContent = document.getElementById('codeContent');
            codeContent.innerHTML = '';

            level.code.forEach((line, index) => {
                const lineElem = document.createElement('span');
                lineElem.className = 'line';
                if (index + 1 === level.errorLine) {
                    lineElem.classList.add('error');
                }
                lineElem.innerHTML = `<span class="line-number">${line.num}</span>${highlightSyntax(line.text)}`;
                codeContent.appendChild(lineElem);
            });

            // ç”Ÿæˆé€‰é¡¹
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';

            level.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = opt.text;
                btn.onclick = () => selectOption(btn, opt.correct);
                optionsContainer.appendChild(btn);
            });

            // é‡ç½®çŠ¶æ€
            answered = false;
            document.getElementById('result').classList.remove('show', 'success', 'fail');
            document.getElementById('nextBtn').style.display = 'none';
        }

        function highlightSyntax(code) {
            // ç®€å•çš„é«˜äº®
            return code
                .replace(/\b(def|return|if|else|for|in|range|print)\b/g, '<span class="keyword">$1</span>')
                .replace(/"[^"]*"/g, '<span class="string">$&</span>')
                .replace(/\b\d+\b/g, '<span class="number">$&</span>')
                .replace(/#.*$/g, '<span class="comment">$&</span>');
        }

        function selectOption(btn, isCorrect) {
            if (answered) return;
            answered = true;

            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(b => b.disabled = true);

            const result = document.getElementById('result');

            if (isCorrect) {
                btn.classList.add('correct');
                score += 20;
                document.getElementById('score').textContent = score;

                result.classList.add('show', 'success');
                document.getElementById('resultTitle').textContent = 'ğŸ‰ æ‰¾å¯¹äº†ï¼';
                document.getElementById('resultMessage').textContent = 'ä½ å‘ç°äº†bugï¼';

                document.getElementById('nextBtn').style.display = 'inline-block';
            } else {
                btn.classList.add('wrong');

                // æ˜¾ç¤ºæ­£ç¡®ç­”æ¡ˆ
                const level = levels[currentLevel];
                buttons.forEach(b => {
                    const opt = level.options.find(o => o.text === b.textContent);
                    if (opt && opt.correct) {
                        b.classList.add('correct');
                    }
                });

                result.classList.add('show', 'fail');
                document.getElementById('resultTitle').textContent = 'âŒ ä¸å¯¹å“¦';
                document.getElementById('resultMessage').textContent = 'å†ä»”ç»†çœ‹çœ‹ä»£ç ï¼';
            }
        }

        function retry() {
            loadLevel(currentLevel);
        }

        function nextLevel() {
            if (currentLevel < levels.length - 1) {
                currentLevel++;
            } else {
                currentLevel = 0;
                alert('ğŸŠ æ­å–œå®Œæˆæ‰€æœ‰å…³å¡ï¼å¾—åˆ†: ' + score);
            }
            loadLevel(currentLevel);
        }

        initGame();
    </script>
</body>
</html>
