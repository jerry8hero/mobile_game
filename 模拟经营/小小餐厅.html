<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°å°é¤å…</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            padding: 15px;
            user-select: none;
        }

        h1 {
            color: #fff;
            font-size: 2rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .info-bar {
            display: flex;
            gap: 20px;
            margin-bottom: 10px;
        }

        .info-item {
            background: rgba(255,255,255,0.3);
            padding: 8px 18px;
            border-radius: 20px;
            color: #fff;
            font-size: 1.1rem;
        }

        .game-container {
            background: #fff;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.3);
            max-width: 450px;
            width: 100%;
        }

        .kitchen {
            background: #f5f5f5;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .kitchen-title {
            font-size: 1rem;
            color: #333;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .menu {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .food-btn {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 10px;
            background: #fff;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
        }

        .food-btn:hover { border-color: #ff9a9e; }
        .food-btn.selected { border-color: #ff9a9e; background: #fff0f0; }
        .food-btn:disabled { opacity: 0.5; }

        .food-emoji { font-size: 2rem; }
        .food-name { font-size: 0.8rem; color: #333; }
        .food-price { font-size: 0.75rem; color: #666; }

        .cooking-area {
            background: #fff3cd;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            text-align: center;
        }

        .cooking-status {
            font-size: 1.1rem;
            color: #856404;
            margin-bottom: 10px;
        }

        .cooking-food {
            font-size: 3rem;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #ddd;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff9a9e, #fecfef);
            width: 0%;
            transition: width 0.1s;
        }

        .counter {
            background: #e8f5e9;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .counter-title {
            font-size: 1rem;
            color: #333;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .customers {
            display: flex;
            gap: 10px;
            justify-content: center;
            min-height: 60px;
        }

        .customer {
            font-size: 2.5rem;
            animation: bounce 0.5s;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .order-bubble {
            position: relative;
            background: #fff;
            border: 2px solid #ff9a9e;
            border-radius: 10px;
            padding: 5px 10px;
            font-size: 1.5rem;
            margin-left: 30px;
        }

        .order-bubble::before {
            content: '';
            position: absolute;
            left: -10px;
            top: 50%;
            border: 5px solid transparent;
            border-right-color: #ff9a9e;
            margin-top: -5px;
        }

        .serve-btn {
            width: 100%;
            padding: 15px;
            font-size: 1.2rem;
            background: #27ae60;
            color: #fff;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 10px;
        }

        .serve-btn:hover { background: #219a52; }
        .serve-btn:disabled { background: #ccc; }

        .stats {
            display: flex;
            justify-content: space-around;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .stat { text-align: center; }
        .stat-value { font-size: 1.5rem; font-weight: bold; color: #333; }
        .stat-label { font-size: 0.8rem; color: #666; }

        .message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.8);
            color: #fff;
            padding: 20px 40px;
            border-radius: 15px;
            font-size: 1.3rem;
            display: none;
            z-index: 100;
        }

        .message.show { display: block; animation: pop 0.3s; }

        @keyframes pop {
            from { transform: translate(-50%, -50%) scale(0.5); }
            to { transform: translate(-50%, -50%) scale(1); }
        }
    </style>
</head>
<body>
    <h1>ğŸ½ï¸ å°å°é¤å…</h1>

    <div class="info-bar">
        <div class="info-item">ğŸ’° <span id="money">0</span></div>
        <div class="info-item">â­ å¥½è¯„: <span id="rating">0</span></div>
    </div>

    <div class="game-container">
        <div class="kitchen">
            <div class="kitchen-title">ğŸ‘¨â€ğŸ³ å¨æˆ¿ - ç‚¹å‡»é€‰æ‹©è¦åšçš„èœ</div>
            <div class="menu" id="menu">
                <button class="food-btn" data-food="hamburger" data-price="15" data-time="5" onclick="selectFood(this)">
                    <div class="food-emoji">ğŸ”</div>
                    <div class="food-name">æ±‰å ¡</div>
                    <div class="food-price">ğŸ’°15 | 5ç§’</div>
                </button>
                <button class="food-btn" data-food="pizza" data-price="25" data-time="8" onclick="selectFood(this)">
                    <div class="food-emoji">ğŸ•</div>
                    <div class="food-name">æŠ«è¨</div>
                    <div class="food-price">ğŸ’°25 | 8ç§’</div>
                </button>
                <button class="food-btn" data-food="noodles" data-price="10" data-time="3" onclick="selectFood(this)">
                    <div class="food-emoji">ğŸœ</div>
                    <div class="food-name">é¢æ¡</div>
                    <div class="food-price">ğŸ’°10 | 3ç§’</div>
                </button>
                <button class="food-btn" data-food="rice" data-price="12" data-time="4" onclick="selectFood(this)">
                    <div class="food-emoji">ğŸš</div>
                    <div class="food-name">ç±³é¥­</div>
                    <div class="food-price">ğŸ’°12 | 4ç§’</div>
                </button>
                <button class="food-btn" data-food="icecream" data-price="8" data-time="2" onclick="selectFood(this)">
                    <div class="food-emoji">ğŸ¦</div>
                    <div class="food-name">å†°æ·‡æ·‹</div>
                    <div class="food-price">ğŸ’°8 | 2ç§’</div>
                </button>
                <button class="food-btn" data-food="coffee" data-price="10" data-time="3" onclick="selectFood(this)">
                    <div class="food-emoji">â˜•</div>
                    <div class="food-name">å’–å•¡</div>
                    <div class="food-price">ğŸ’°10 | 3ç§’</div>
                </button>
            </div>
        </div>

        <div class="cooking-area">
            <div class="cooking-status" id="cookingStatus">å¨æˆ¿ç©ºé—²ä¸­...</div>
            <div class="cooking-food" id="cookingFood">ğŸ³</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <div class="counter">
            <div class="counter-title">ğŸ½ï¸ é¡¾å®¢åº§ä½</div>
            <div class="customers" id="customers">
                <div class="customer">ğŸ˜‹</div>
                <div class="order-bubble" id="orderBubble">ğŸ”</div>
            </div>
            <button class="serve-btn" id="serveBtn" onclick="serveFood()" disabled>ä¸Šèœ</button>
        </div>

        <div class="stats">
            <div class="stat">
                <div class="stat-value" id="served">0</div>
                <div class="stat-label">å·²æœåŠ¡</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="waiting">0</div>
                <div class="stat-label">ç­‰å¾…ä¸­</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="angry">0</div>
                <div class="stat-label">ç”Ÿæ°”èµ°äºº</div>
            </div>
        </div>
    </div>

    <div class="message" id="message"></div>

    <script>
        const foods = {
            hamburger: { emoji: 'ğŸ”', name: 'æ±‰å ¡', price: 15, time: 5 },
            pizza: { emoji: 'ğŸ•', name: 'æŠ«è¨', price: 25, time: 8 },
            noodles: { emoji: 'ğŸœ', name: 'é¢æ¡', price: 10, time: 3 },
            rice: { emoji: 'ğŸš', name: 'ç±³é¥­', price: 12, time: 4 },
            icecream: { emoji: 'ğŸ¦', name: 'å†°æ·‡æ·‹', price: 8, time: 2 },
            coffee: { emoji: 'â˜•', name: 'å’–å•¡', price: 10, time: 3 }
        };

        const customerEmojis = ['ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¦', 'ğŸ‘§', 'ğŸ‘´', 'ğŸ‘µ', 'ğŸ§‘'];

        let money = 0;
        let rating = 0;
        let served = 0;
        let waiting = 0;
        let angry = 0;

        let selectedFood = null;
        let cookingFood = null;
        let cookingStartTime = 0;
        let currentOrder = null;
        let isCooking = false;
        let orderTimer = null;

        function selectFood(btn) {
            if (isCooking) {
                showMessage('æ­£åœ¨åšèœï¼Œç¨ç­‰ï¼');
                return;
            }

            document.querySelectorAll('.food-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            selectedFood = btn.dataset.food;

            startCooking();
        }

        function startCooking() {
            if (!selectedFood) return;

            const food = foods[selectedFood];
            isCooking = true;
            cookingFood = selectedFood;
            cookingStartTime = Date.now();

            document.getElementById('cookingStatus').textContent = 'æ­£åœ¨çƒ¹é¥ª ' + food.name + '...';
            document.getElementById('cookingFood').textContent = food.emoji;
            document.getElementById('serveBtn').disabled = true;

            // ç¦ç”¨å…¶ä»–æŒ‰é’®
            document.querySelectorAll('.food-btn').forEach(b => {
                b.disabled = true;
            });

            // è¿›åº¦æ¡åŠ¨ç”»
            let progress = 0;
            const interval = setInterval(() => {
                progress += 100 / (food.time * 10);
                document.getElementById('progressFill').style.width = Math.min(progress, 100) + '%';

                if (progress >= 100) {
                    clearInterval(interval);
                    finishCooking();
                }
            }, 100);
        }

        function finishCooking() {
            isCooking = false;
            const food = foods[cookingFood];

            document.getElementById('cookingStatus').textContent = food.name + 'åšå¥½äº†ï¼';
            document.getElementById('serveBtn').disabled = false;

            // å¯ç”¨æŒ‰é’®
            document.querySelectorAll('.food-btn').forEach(b => {
                b.disabled = false;
            });
        }

        function serveFood() {
            if (!cookingFood) return;

            const food = foods[cookingFood];

            // æ£€æŸ¥æ˜¯å¦åŒ¹é…è®¢å•
            if (currentOrder && currentOrder !== cookingFood) {
                showMessage('âŒ è®¢å•æ˜¯' + foods[currentOrder].emoji + 'ï¼Œä¸æ˜¯è¿™ä¸ªï¼');
                angry++;
                clearCustomer();
                return;
            }

            // æˆåŠŸ
            money += food.price;
            served++;
            waiting = Math.max(0, waiting - 1);

            showMessage('+' + food.price + 'é‡‘å¸ï¼');

            // é‡ç½®å¨æˆ¿
            cookingFood = null;
            document.getElementById('cookingStatus').textContent = 'å¨æˆ¿ç©ºé—²ä¸­...';
            document.getElementById('cookingFood').textContent = 'ğŸ³';
            document.getElementById('progressFill').style.width = '0%';
            document.getElementById('serveBtn').disabled = true;
            document.querySelectorAll('.food-btn').forEach(b => b.classList.remove('selected'));
            selectedFood = null;

            clearCustomer();
            updateStats();
        }

        function generateCustomer() {
            if (waiting >= 3) return;

            // éšæœºé€‰æ‹©é£Ÿç‰©
            const foodKeys = Object.keys(foods);
            currentOrder = foodKeys[Math.floor(Math.random() * foodKeys.length)];

            const customerEmoji = customerEmojis[Math.floor(Math.random() * customerEmojis.length)];

            document.getElementById('customers').innerHTML = `
                <div class="customer">${customerEmoji}</div>
                <div class="order-bubble">${foods[currentOrder].emoji}</div>
            `;

            waiting++;

            // è®¾ç½®ç­‰å¾…è¶…æ—¶
            const patience = 10000 + Math.random() * 10000;
            orderTimer = setTimeout(() => {
                if (currentOrder) {
                    angry++;
                    showMessage('ğŸ˜  é¡¾å®¢ç­‰ä¸åŠèµ°äº†ï¼');
                    clearCustomer();
                    updateStats();
                }
            }, patience);

            updateStats();
        }

        function clearCustomer() {
            currentOrder = null;
            if (orderTimer) {
                clearTimeout(orderTimer);
                orderTimer = null;
            }

            setTimeout(() => {
                document.getElementById('customers').innerHTML = '<div class="customer">ğŸ˜‹</div><div class="order-bubble">ğŸ½ï¸</div>';
            }, 500);
        }

        function updateStats() {
            document.getElementById('money').textContent = money;
            document.getElementById('rating').textContent = rating;
            document.getElementById('served').textContent = served;
            document.getElementById('waiting').textContent = waiting;
            document.getElementById('angry').textContent = angry;
        }

        function showMessage(text) {
            const msg = document.getElementById('message');
            msg.textContent = text;
            msg.classList.add('show');
            setTimeout(() => msg.classList.remove('show'), 1500);
        }

        // ç”Ÿæˆé¡¾å®¢
        setInterval(() => {
            if (Math.random() < 0.3) {
                generateCustomer();
            }
        }, 3000);

        // åˆå§‹é¡¾å®¢
        setTimeout(generateCustomer, 1000);
    </script>
</body>
</html>
