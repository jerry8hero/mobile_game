<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°å°å†œåœº</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            padding: 15px;
            user-select: none;
        }

        h1 {
            color: #fff;
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .info-bar {
            display: flex;
            gap: 20px;
            margin-bottom: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .info-item {
            background: rgba(255,255,255,0.25);
            padding: 8px 18px;
            border-radius: 20px;
            color: #fff;
            font-size: 1.1rem;
        }

        .game-area {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 500px;
        }

        .farm-grid {
            display: grid;
            grid-template-columns: repeat(3, 80px);
            gap: 10px;
            background: #8B4513;
            padding: 15px;
            border-radius: 15px;
        }

        .plot {
            width: 80px;
            height: 80px;
            background: #654321;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
        }

        .plot:hover { background: #7a5228; }

        .plot .timer {
            position: absolute;
            bottom: 2px;
            right: 2px;
            font-size: 0.7rem;
            background: rgba(0,0,0,0.7);
            color: #fff;
            padding: 2px 5px;
            border-radius: 5px;
        }

        .plot.empty { opacity: 0.7; }
        .plot.empty::after { content: 'ğŸ•³ï¸'; font-size: 1.5rem; opacity: 0.5; }

        .shop {
            background: #fff;
            border-radius: 15px;
            padding: 15px;
            max-width: 200px;
        }

        .shop-title {
            font-size: 1rem;
            color: #333;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .seed-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 10px;
            background: #f8f9fa;
            cursor: pointer;
            margin-bottom: 8px;
            transition: all 0.2s;
        }

        .seed-btn:hover { border-color: #56ab2f; }
        .seed-btn.selected { border-color: #56ab2f; background: #d4edda; }
        .seed-btn:disabled { opacity: 0.5; }

        .seed-emoji { font-size: 1.5rem; }
        .seed-info { text-align: left; flex: 1; }
        .seed-name { font-size: 0.9rem; font-weight: bold; }
        .seed-price { font-size: 0.8rem; color: #666; }

        .action-btn {
            padding: 10px 20px;
            font-size: 1rem;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 10px;
        }

        .harvest-btn { background: #f39c12; color: #fff; }
        .harvest-btn:hover { background: #e67e22; }

        .inventory {
            background: #fff;
            border-radius: 15px;
            padding: 15px;
            margin-top: 15px;
            width: 100%;
            max-width: 500px;
        }

        .inventory h3 { color: #333; margin-bottom: 10px; }
        .inventory-items { display: flex; gap: 10px; flex-wrap: wrap; }

        .inv-item {
            background: #f8f9fa;
            padding: 8px 12px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.8);
            color: #fff;
            padding: 20px 40px;
            border-radius: 15px;
            font-size: 1.3rem;
            display: none;
            z-index: 100;
        }

        .message.show { display: block; animation: pop 0.3s; }

        @keyframes pop {
            from { transform: translate(-50%, -50%) scale(0.5); }
            to { transform: translate(-50%, -50%) scale(1); }
        }
    </style>
</head>
<body>
    <h1>ğŸŒ¾ å°å°å†œåœº</h1>

    <div class="info-bar">
        <div class="info-item">ğŸ’° é‡‘å¸: <span id="money">100</span></div>
        <div class="info-item">ğŸŒ± å·²ç§æ¤: <span id="planted">0</span>/9</div>
    </div>

    <div class="game-area">
        <div class="farm-grid" id="farmGrid">
            <!-- 9ä¸ªåœ°å— -->
        </div>

        <div class="shop">
            <div class="shop-title">ğŸ›’ ç§å­å•†åº—</div>
            <button class="seed-btn" data-seed="carrot" data-price="10" data-time="5" data-earn="20" onclick="selectSeed(this)">
                <span class="seed-emoji">ğŸ¥•</span>
                <div class="seed-info">
                    <div class="seed-name">èƒ¡èåœ</div>
                    <div class="seed-price">ğŸ’°10 | 5ç§’</div>
                </div>
            </button>
            <button class="seed-btn" data-seed="corn" data-price="20" data-time="8" data-earn="40" onclick="selectSeed(this)">
                <span class="seed-emoji">ğŸŒ½</span>
                <div class="seed-info">
                    <div class="seed-name">ç‰ç±³</div>
                    <div class="seed-price">ğŸ’°20 | 8ç§’</div>
                </div>
            </button>
            <button class="seed-btn" data-seed="tomato" data-price="30" data-time="10" data-earn="60" onclick="selectSeed(this)">
                <span class="seed-emoji">ğŸ…</span>
                <div class="seed-info">
                    <div class="seed-name">ç•ªèŒ„</div>
                    <div class="seed-price">ğŸ’°30 | 10ç§’</div>
                </div>
            </button>
            <button class="seed-btn" data-seed="watermelon" data-price="50" data-time="15" data-earn="100" onclick="selectSeed(this)">
                <span class="seed-emoji">ğŸ‰</span>
                <div class="seed-info">
                    <div class="seed-name">è¥¿ç“œ</div>
                    <div class="seed-price">ğŸ’°50 | 15ç§’</div>
                </div>
            </button>
        </div>
    </div>

    <div class="inventory">
        <h3>ğŸ“¦ ä»“åº“ (æ”¶è·çš„å†œä½œç‰©)</h3>
        <div class="inventory-items" id="inventory">
            <div class="inv-item">æš‚æ— æ”¶è·</div>
        </div>
        <button class="action-btn harvest-btn" onclick="sellAll()">ğŸ’° å‡ºå”®å…¨éƒ¨</button>
    </div>

    <div class="message" id="message"></div>

    <script>
        const seeds = {
            carrot: { emoji: 'ğŸ¥•', name: 'èƒ¡èåœ', price: 10, time: 5, earn: 20 },
            corn: { emoji: 'ğŸŒ½', name: 'ç‰ç±³', price: 20, time: 8, earn: 40 },
            tomato: { emoji: 'ğŸ…', name: 'ç•ªèŒ„', price: 30, time: 10, earn: 60 },
            watermelon: { emoji: 'ğŸ‰', name: 'è¥¿ç“œ', price: 50, time: 15, earn: 100 }
        };

        let money = 100;
        let selectedSeed = null;
        let plots = new Array(9).fill(null);
        let inventory = {};
        let timers = {};

        function initFarm() {
            const grid = document.getElementById('farmGrid');
            grid.innerHTML = '';

            for (let i = 0; i < 9; i++) {
                const plot = document.createElement('div');
                plot.className = 'plot empty';
                plot.dataset.index = i;
                plot.onclick = () => clickPlot(i);
                grid.appendChild(plot);
            }
        }

        function selectSeed(btn) {
            document.querySelectorAll('.seed-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            selectedSeed = btn.dataset.seed;
        }

        function clickPlot(index) {
            const plot = plots[index];

            if (!selectedSeed) {
                showMessage('è¯·å…ˆé€‰æ‹©ç§å­ï¼');
                return;
            }

            if (plot && plot.growing) {
                showMessage('è¿™å—åœ°æ­£åœ¨ç”Ÿé•¿ä¸­ï¼');
                return;
            }

            // æ£€æŸ¥é’±å¤Ÿä¸å¤Ÿ
            const seedInfo = seeds[selectedSeed];
            if (money < seedInfo.price) {
                showMessage('é‡‘å¸ä¸è¶³ï¼');
                return;
            }

            // ç§æ¤
            money -= seedInfo.price;
            updateMoney();

            plots[index] = {
                type: selectedSeed,
                startTime: Date.now(),
                growing: true,
                ready: false
            };

            updatePlot(index);
            updatePlanted();

            // å¼€å§‹ç”Ÿé•¿è®¡æ—¶
            timers[index] = setTimeout(() => {
                plots[index].growing = false;
                plots[index].ready = true;
                updatePlot(index);
                showMessage('ğŸ‰ ' + seedInfo.name + 'æˆç†Ÿäº†ï¼');
            }, seedInfo.time * 1000);
        }

        function updatePlot(index) {
            const plot = document.querySelectorAll('.plot')[index];
            const data = plots[index];

            if (!data) {
                plot.className = 'plot empty';
                plot.innerHTML = '';
                return;
            }

            const seedInfo = seeds[data.type];

            if (data.growing) {
                const elapsed = (Date.now() - data.startTime) / 1000;
                const remaining = Math.max(0, seedInfo.time - elapsed);
                plot.className = 'plot';
                plot.innerHTML = 'ğŸŒ±<div class="timer">' + Math.ceil(remaining) + 's</div>';
            } else if (data.ready) {
                plot.className = 'plot';
                plot.innerHTML = seedInfo.emoji;
            } else {
                plot.className = 'plot';
                plot.innerHTML = seedInfo.emoji;
            }
        }

        function updatePlanted() {
            const count = plots.filter(p => p && p.growing).length;
            document.getElementById('planted').textContent = count;
        }

        function updateMoney() {
            document.getElementById('money').textContent = money;
        }

        function sellAll() {
            let total = 0;
            for (const [type, count] of Object.entries(inventory)) {
                total += seeds[type].earn * count;
            }

            if (total === 0) {
                showMessage('ä»“åº“æ˜¯ç©ºçš„ï¼');
                return;
            }

            money += total;
            updateMoney();

            inventory = {};
            updateInventory();
            showMessage('ğŸ’° å–å‡ºè·å¾— ' + total + ' é‡‘å¸ï¼');
        }

        function updateInventory() {
            const container = document.getElementById('inventory');

            if (Object.keys(inventory).length === 0) {
                container.innerHTML = '<div class="inv-item">æš‚æ— æ”¶è·</div>';
                return;
            }

            container.innerHTML = '';
            for (const [type, count] of Object.entries(inventory)) {
                const item = document.createElement('div');
                item.className = 'inv-item';
                item.textContent = seeds[type].emoji + ' ' + count;
                container.appendChild(item);
            }
        }

        function showMessage(text) {
            const msg = document.getElementById('message');
            msg.textContent = text;
            msg.classList.add('show');
            setTimeout(() => msg.classList.remove('show'), 1500);
        }

        // ç‚¹å‡»å·²æˆç†Ÿçš„ä½œç‰©æ”¶è·
        document.addEventListener('click', (e) => {
            const plot = e.target.closest('.plot');
            if (!plot) return;

            const index = parseInt(plot.dataset.index);
            const data = plots[index];

            if (data && data.ready) {
                // æ”¶è·
                if (!inventory[data.type]) inventory[data.type] = 0;
                inventory[data.type]++;
                updateInventory();

                plots[index] = null;
                updatePlot(index);
                updatePlanted();

                showMessage('ğŸ‰ æ”¶è· ' + seeds[data.type].name + 'ï¼');
            }
        });

        // æ›´æ–°ç”Ÿé•¿è¿›åº¦
        setInterval(() => {
            plots.forEach((data, index) => {
                if (data && data.growing) {
                    updatePlot(index);
                }
            });
        }, 1000);

        initFarm();
    </script>
</body>
</html>
